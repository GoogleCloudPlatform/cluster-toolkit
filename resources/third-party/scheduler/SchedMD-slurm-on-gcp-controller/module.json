{
  "header": "Copyright 2021 Google LLC\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.",
  "footer": "",
  "inputs": [
    {
      "name": "boot_disk_size",
      "type": "number",
      "description": "Size of boot disk to create for the cluster controller node",
      "default": 50,
      "required": false
    },
    {
      "name": "boot_disk_type",
      "type": "string",
      "description": "Type of boot disk to create for the cluster controller node",
      "default": "pd-standard",
      "required": false
    },
    {
      "name": "cloudsql",
      "type": "object({\n    server_ip = string,\n    user      = string,\n    password  = string,\n    db_name   = string\n  })",
      "description": "Define an existing CloudSQL instance to use instead of instance-local MySQL",
      "default": null,
      "required": false
    },
    {
      "name": "cluster_name",
      "type": "string",
      "description": "Name of the cluster",
      "default": null,
      "required": false
    },
    {
      "name": "compute_node_scopes",
      "type": "list(string)",
      "description": "Scopes to apply to compute nodes.",
      "default": [
        "https://www.googleapis.com/auth/monitoring.write",
        "https://www.googleapis.com/auth/logging.write"
      ],
      "required": false
    },
    {
      "name": "compute_node_service_account",
      "type": "string",
      "description": "Service Account for compute nodes.",
      "default": null,
      "required": false
    },
    {
      "name": "controller_image",
      "type": "string",
      "description": "Slurm image to use for the controller instance",
      "default": "projects/schedmd-slurm-public/global/images/family/schedmd-slurm-20-11-7-hpc-centos-7",
      "required": false
    },
    {
      "name": "controller_instance_template",
      "type": "string",
      "description": "Instance template to use to create controller instance",
      "default": null,
      "required": false
    },
    {
      "name": "controller_machine_type",
      "type": "string",
      "description": "Compute Platform machine type to use in controller node creation",
      "default": "n2-standard-2",
      "required": false
    },
    {
      "name": "controller_scopes",
      "type": "list(string)",
      "description": "Scopes to apply to the controller",
      "default": [
        "https://www.googleapis.com/auth/cloud-platform"
      ],
      "required": false
    },
    {
      "name": "controller_secondary_disk",
      "type": "bool",
      "description": "Create secondary disk mounted to controller node",
      "default": false,
      "required": false
    },
    {
      "name": "controller_secondary_disk_size",
      "type": "number",
      "description": "Size of disk for the secondary disk",
      "default": 100,
      "required": false
    },
    {
      "name": "controller_secondary_disk_type",
      "type": "string",
      "description": "Disk type (pd-ssd or pd-standard) for secondary disk",
      "default": "pd-ssd",
      "required": false
    },
    {
      "name": "controller_service_account",
      "type": "string",
      "description": "Service Account for the controller",
      "default": null,
      "required": false
    },
    {
      "name": "deployment_name",
      "type": "string",
      "description": "Name of the deployment",
      "default": null,
      "required": true
    },
    {
      "name": "disable_compute_public_ips",
      "type": "bool",
      "description": "If set to true, create Cloud NAT gateway and enable IAP FW rules",
      "default": true,
      "required": false
    },
    {
      "name": "disable_controller_public_ips",
      "type": "bool",
      "description": "If set to true, create Cloud NAT gateway and enable IAP FW rules",
      "default": false,
      "required": false
    },
    {
      "name": "jwt_key",
      "type": "any",
      "description": "Specific libjwt key to use",
      "default": null,
      "required": false
    },
    {
      "name": "labels",
      "type": "any",
      "description": "Labels to add to controller instance. List of key key, value pairs.",
      "default": {},
      "required": false
    },
    {
      "name": "login_node_count",
      "type": "number",
      "description": "Number of login nodes in the cluster",
      "default": 0,
      "required": false
    },
    {
      "name": "munge_key",
      "type": "any",
      "description": "Specific munge key to use",
      "default": null,
      "required": false
    },
    {
      "name": "network_storage",
      "type": "list(object({\n    server_ip     = string,\n    remote_mount  = string,\n    local_mount   = string,\n    fs_type       = string,\n    mount_options = string\n  }))",
      "description": " An array of network attached storage mounts to be configured on all instances.",
      "default": [],
      "required": false
    },
    {
      "name": "partitions",
      "type": "list(object({\n    name                 = string,\n    machine_type         = string,\n    max_node_count       = number,\n    zone                 = string,\n    image                = string,\n    image_hyperthreads   = bool,\n    compute_disk_type    = string,\n    compute_disk_size_gb = number,\n    compute_labels       = any,\n    cpu_platform         = string,\n    gpu_type             = string,\n    gpu_count            = number,\n    network_storage = list(object({\n      server_ip     = string,\n      remote_mount  = string,\n      local_mount   = string,\n      fs_type       = string,\n      mount_options = string\n    })),\n    preemptible_bursting = bool,\n    vpc_subnet           = string,\n    exclusive            = bool,\n    enable_placement     = bool,\n    regional_capacity    = bool,\n    regional_policy      = any,\n    instance_template    = string,\n    static_node_count    = number\n  }))",
      "description": "An array of configurations for specifying multiple machine types residing in their own Slurm partitions.",
      "default": null,
      "required": true
    },
    {
      "name": "project_id",
      "type": "string",
      "description": "Compute Platform project that will host the Slurm cluster",
      "default": null,
      "required": true
    },
    {
      "name": "region",
      "type": "string",
      "description": "Compute Platform region where the Slurm cluster will be located",
      "default": null,
      "required": true
    },
    {
      "name": "shared_vpc_host_project",
      "type": "string",
      "description": "Host project of shared VPC",
      "default": null,
      "required": false
    },
    {
      "name": "subnetwork_name",
      "type": "string",
      "description": "The name of the pre-defined VPC subnet you want the nodes to attach to based on Region.",
      "default": null,
      "required": false
    },
    {
      "name": "suspend_time",
      "type": "number",
      "description": "Idle time (in sec) to wait before nodes go away",
      "default": 300,
      "required": false
    },
    {
      "name": "zone",
      "type": "string",
      "description": "Compute Platform zone where the servers will be located",
      "default": null,
      "required": true
    }
  ],
  "modules": [
    {
      "name": "slurm_cluster_controller",
      "source": "github.com/SchedMD/slurm-gcp//tf/modules/controller/",
      "version": "v4.0.4",
      "description": null
    }
  ],
  "outputs": [
    {
      "name": "controller_node_name",
      "description": "Name of the controller node"
    }
  ],
  "providers": [],
  "requirements": [
    {
      "name": "terraform",
      "version": "\u003e= 0.14.0"
    }
  ],
  "resources": []
}
