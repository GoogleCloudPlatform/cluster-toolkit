{
  "header": "",
  "footer": "",
  "inputs": [
    {
      "name": "deployment_key",
      "type": "string",
      "description": "Name to identify resources from this deployment",
      "default": "",
      "required": false
    },
    {
      "name": "deployment_mode",
      "type": "string",
      "description": "Use a tarball of this directory, or download from git to deploy the server. Must be either 'tarball' or 'git'",
      "default": "tarball",
      "required": false
    },
    {
      "name": "deployment_name",
      "type": "string",
      "description": "Base \"name\" for the deployment.",
      "default": null,
      "required": true
    },
    {
      "name": "django_su_email",
      "type": "string",
      "description": "DJango Admin SuperUser email",
      "default": null,
      "required": true
    },
    {
      "name": "django_su_password",
      "type": "string",
      "description": "DJango Admin SuperUser password",
      "default": null,
      "required": true
    },
    {
      "name": "django_su_username",
      "type": "string",
      "description": "DJango Admin SuperUser username",
      "default": "admin",
      "required": false
    },
    {
      "name": "extra_labels",
      "type": "map(any)",
      "description": "Extra labels to apply to created GCP resources.",
      "default": {},
      "required": false
    },
    {
      "name": "project_id",
      "type": "string",
      "description": "GCP Project in which to deploy the HPC Frontend.",
      "default": null,
      "required": true
    },
    {
      "name": "region",
      "type": "string",
      "description": "GCP Region for HPC Frontend deployment.",
      "default": null,
      "required": true
    },
    {
      "name": "repo_branch",
      "type": "string",
      "description": "git branch to checkout when deploying the HPC Frontend",
      "default": "main",
      "required": false
    },
    {
      "name": "repo_fork",
      "type": "string",
      "description": "GitHub repository name in which to find the hpc-toolkit repo",
      "default": "GoogleCloudPlatform",
      "required": false
    },
    {
      "name": "server_instance_type",
      "type": "string",
      "description": "Instance size to use from HPC Frontend webserver",
      "default": "e2-standard-2",
      "required": false
    },
    {
      "name": "ssh_key",
      "type": "string",
      "description": "admin SSH Key to add to the webserver instance",
      "default": "~/.ssh/id_rsa.pub",
      "required": false
    },
    {
      "name": "static_ip",
      "type": "string",
      "description": "Optional pre-configured static IP for HPC Frontend.",
      "default": "",
      "required": false
    },
    {
      "name": "subnet",
      "type": "string",
      "description": "Subnet in which to deploy HPC Frontend.",
      "default": "",
      "required": false
    },
    {
      "name": "webserver_hostname",
      "type": "string",
      "description": "DNS Hostname for the webserver",
      "default": "",
      "required": false
    },
    {
      "name": "zone",
      "type": "string",
      "description": "GCP Zone for HPC Frontend deployment.",
      "default": null,
      "required": true
    }
  ],
  "modules": [
    {
      "name": "control_bucket",
      "source": "terraform-google-modules/cloud-storage/google",
      "version": "~\u003e 2.2",
      "description": null
    },
    {
      "name": "network",
      "source": "./network",
      "version": "",
      "description": null
    },
    {
      "name": "pubsub",
      "source": "terraform-google-modules/pubsub/google",
      "version": "~\u003e 1.8",
      "description": null
    },
    {
      "name": "service_account",
      "source": "terraform-google-modules/service-accounts/google",
      "version": "~\u003e 4.1",
      "description": null
    }
  ],
  "outputs": [
    {
      "name": "server_ip",
      "description": "Webserver IP Address"
    }
  ],
  "providers": [
    {
      "name": "google",
      "alias": null,
      "version": "~\u003e 3.0"
    },
    {
      "name": "null",
      "alias": null,
      "version": "\u003e= 1.0"
    }
  ],
  "requirements": [
    {
      "name": "terraform",
      "version": "\u003e= 0.13"
    },
    {
      "name": "google",
      "version": "~\u003e 3.0"
    },
    {
      "name": "google-beta",
      "version": "~\u003e 3.0"
    },
    {
      "name": "null",
      "version": "\u003e= 1.0"
    }
  ],
  "resources": [
    {
      "type": "compute_instance",
      "name": "server_vm",
      "provider": "google",
      "source": "hashicorp/google",
      "mode": "managed",
      "version": "latest",
      "description": null
    },
    {
      "type": "storage_bucket_object",
      "name": "config_file",
      "provider": "google",
      "source": "hashicorp/google",
      "mode": "managed",
      "version": "latest",
      "description": null
    },
    {
      "type": "storage_bucket_object",
      "name": "deployment_file",
      "provider": "google",
      "source": "hashicorp/google",
      "mode": "managed",
      "version": "latest",
      "description": "Also upload our deployment tarball"
    },
    {
      "type": "resource",
      "name": "uploader",
      "provider": "null",
      "source": "hashicorp/null",
      "mode": "managed",
      "version": "latest",
      "description": null
    }
  ]
}
