## Description

This module will create a startup-script runner that will execute Ramble commands.

Ramble is a multi-platform experimentation framework capable of driving
software installation, acquiring input files, configuring experiments, and
extracting results. For more information about Ramble, see:
https://github.com/GoogleCloudPlatform/ramble

This module outputs a startup script runner, which can be combined with other
startup script runners to execute a set of Ramble commands.

Ramble makes extensive use of Spack. It must be installed with a Toolkit runner
generated by the [spack module](../spack-install/README.md) following the
[basic example](#basic-example) below.

> **_NOTE:_** This is an experimental module and the functionality and
> documentation will likely be updated in the near future. This module has only
> been tested in limited capacity.

# Examples

## Basic Example

Below is a basic example of using this module.

```yaml
  - id: spack
    source: community/modules/scripts/spack-install

  - id: ramble-setup
    source: community/modules/scripts/ramble-setup

  - id: ramble-execute
    source: community/modules/scripts/ramble-execute
    use: [spack, ramble-setup]
    settings:
      commands:
      - ramble list
```

This example shows installing Spack and Ramble with their own modules
(spack-install and ramble-setup respectively). Then the ramble-execute module
is added to simply list all applications Ramble knows about.

## License

<!-- BEGINNING OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
Copyright 2023 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.0 |
| <a name="requirement_local"></a> [local](#requirement\_local) | >= 2.0.0 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_local"></a> [local](#provider\_local) | >= 2.0.0 |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [local_file.debug_file](https://registry.terraform.io/providers/hashicorp/local/latest/docs/resources/file) | resource |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_commands"></a> [commands](#input\_commands) | String of commands to run within this module | `string` | `null` | no |
| <a name="input_log_file"></a> [log\_file](#input\_log\_file) | Log file to write output from Ramble execute steps into | `string` | `"/var/log/ramble-execute.log"` | no |
| <a name="input_ramble_path"></a> [ramble\_path](#input\_ramble\_path) | Path to the Ramble installation | `string` | n/a | yes |
| <a name="input_ramble_runner"></a> [ramble\_runner](#input\_ramble\_runner) | Ansible based startup-script runner from a previous Ramble step<br>Will automatically be prepended to the script generated by this module. | <pre>object({<br>    type        = string<br>    content     = string<br>    destination = string<br>  })</pre> | `null` | no |
| <a name="input_spack_path"></a> [spack\_path](#input\_spack\_path) | Path to the Spack installation | `string` | n/a | yes |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_ramble_runner"></a> [ramble\_runner](#output\_ramble\_runner) | Runner to execute Ramble commands using an ansible playbook. The startup-script module<br>will automatically handle installation of ansible. |
<!-- END OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
